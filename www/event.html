<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:py="http://genshi.edgewall.org/" xmlns:xi="http://www.w3.org/2001/XInclude">
    <?python import re ?>
    <xi:include href="macros.html"></xi:include>

    <div class="panel panel-default">
        <div class="panel-heading clearfix">
            <span class="dropdown">
                <span class="fa fa-calendar"></span>&nbsp;
                <a href="#" onclick="return false;" data-toggle="dropdown">
                    ${page['event']['year']} Event Info
                    <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                    <li py:for="event in page['years']"  py:attrs="{'class':'disabled' if int(event['year']) == int(page['event']['year']) else ''}">
                        <a href="/event/${event['key']}">${event['year']} ${event['name']}</a>
                    </li>
                </ul>
            </span>
            <a href="/update/event/${page['event']['key']}" onclick="return loader(this);" class="pull-right faa-parent animated-hover">
                <span class="fa fa-refresh faa-spin"></span>&nbsp;&nbsp;Update
            </a>
        </div>
        <div class="panel-body">
            ${event_info(page['event'])}
        </div>
    </div>

    <div>
        <ul class="nav nav-tabs" role="tablist">
            <li role="presentation" class="active">
                <a href="#matches" role="tab" data-toggle="tab">
                    <span class="fa fa-futbol-o"></span>&nbsp;&nbsp;Matches
                    <span class="badge">${len(page['event']['matches']) if 'matches' in page['event'] else 0}</span>
                </a>
            </li>
            <li role="presentation" py:if="'teams' in page['event'] and page['event']['teams']">
                <a href="#teams" role="tab" data-toggle="tab">
                    <span class="fa fa-users"></span>&nbsp;&nbsp;Teams
                    <span class="badge">${len(page['event']['teams'])}</span>
                </a>
            </li>
            <li role="presentation" py:if="'stats' in page and page['stats']">
                <a href="#stats" role="tab" data-toggle="tab">
                    <span class="fa fa-bar-chart"></span>&nbsp;&nbsp;Stats
                    <span class="badge">${len(page['stats'])}</span>
                </a>
            </li>
        </ul>
        <br />
        <div class="tab-content">
            <div id="matches" role="tabpanel" class="tab-page active">
                <div class="panel panel-default">
                    <div class="panel-heading clearfix">
                        <span class="fa fa-futbol-o"></span>&nbsp;&nbsp;Match Listing
                        <a href="/update/event/${page['event']['key']}" onclick="return loader(this);" class="pull-right faa-parent animated-hover">
                            <span class="fa fa-refresh faa-spin"></span>&nbsp;&nbsp;Update
                        </a>
                    </div>
                    <div class="panel-body">
                        <div class="clearfix">
                            <div class="pull-left">
                                <a href="/scout/match/${page['event']['key']}" class="btn btn-primary">
                                    <span class="fa fa-binoculars"></span>&nbsp;&nbsp;Match Scout
                                </a>
                            </div>
                            <div class="pull-right" py:if="'matches' in page['event'] and page['event']['matches']">
                                <a href="/download/matches/${page['event']['key']}" class="btn btn-primary">
                                    <span class="fa fa-download"></span>&nbsp;&nbsp;Match List
                                </a>
                                <a href="/download/scouting/match/${page['event']['key']}" class="btn btn-primary">
                                    <span class="fa fa-download"></span>&nbsp;&nbsp;Match Scouting
                                </a>
                            </div>
                        </div>
                        <py:if test="'matches' in page['event'] and page['event']['matches']">
                            <br />
                            ${match_listing(page['event']['matches'])}
                        </py:if>
                    </div>
                </div>
            </div>
            <div id="teams" role="tabpanel" class="tab-page" py:if="'teams' in page['event'] and page['event']['teams']">
                <div class="panel panel-default">
                    <div class="panel-heading clearfix">
                        <span class="fa fa-users"></span>&nbsp;&nbsp;Team Listing
                        <a href="/update/event/${page['event']['key']}" onclick="return loader(this);" class="pull-right faa-parent animated-hover">
                            <span class="fa fa-refresh faa-spin"></span>&nbsp;&nbsp;Update
                        </a>
                    </div>
                    <div class="panel-body" py:if="'teams' in page['event'] and page['event']['teams']">
                        <div class="clearfix">
                            <div class="pull-left">
                                <a href="/scout/pit/${page['event']['key']}" class="btn btn-primary">
                                    <span class="fa fa-binoculars"></span>&nbsp;&nbsp;Pit Scout
                                </a>
                            </div>
                            <div class="pull-right">
                                <a href="/download/scouting/pit/${page['event']['key']}" class="btn btn-primary">
                                    <span class="fa fa-download"></span>&nbsp;&nbsp;Pit Scouting
                                </a>
                            </div>
                        </div>
                        <br />
                        ${team_listing(page['event']['teams'], page['event'])}
                    </div>
                </div>
            </div>
            <div id="stats" role="tabpanel" class="tab-page" py:if="'stats' in page and page['stats']">
                <div class="panel panel-default">
                    <div class="panel-heading clearfix">
                        <span class="fa fa-bar-chart"></span>&nbsp;&nbsp;Scouting Statistics -
                        <py:choose>
                            <py:when test="page['stats_matches'] == 0">All Matches</py:when>
                            <py:when test="page['stats_matches'] > 0">First ${page['stats_matches']} Matches</py:when>
                            <py:when test="page['stats_matches'] &lt; 0">Last ${page['stats_matches']*-1} Matches</py:when>
                        </py:choose>
                    </div>
                    <div class="panel-body" py:if="'teams' in page['event'] and page['event']['teams']">
                        <div class="clearfix">
                            <div class="pull-left">
                                <a href="/event/${page['event']['key']}#stats" class="btn ${'btn-default' if page['stats_matches'] == 0 else 'btn-primary'}">
                                    <span class="fa fa-chevron-up"></span>&nbsp;&nbsp;All Matches
                                </a>
                                <a href="/event/${page['event']['key']}/5#stats" class="btn ${'btn-default' if page['stats_matches'] == 5 else 'btn-primary'}">
                                    <span class="fa fa-chevron-left"></span>&nbsp;&nbsp;First 5 Matches
                                </a>
                                <a href="/event/${page['event']['key']}/-5#stats" class="btn ${'btn-default' if page['stats_matches'] == -5 else 'btn-primary'}">
                                    <span class="fa fa-chevron-right"></span>&nbsp;&nbsp;Last 5 Matches
                                </a>
                            </div>
                            <div class="pull-right">
                                <a href="/download/stats/${page['event']['key']}/${page['stats_matches'] or 0}" class="btn btn-primary">
                                    <span class="fa fa-download"></span>&nbsp;
                                    ${'All' if page['stats_matches'] == 0 else ('First' if page['stats_matches'] > 0 else 'Last') + ' ' + str(abs(page['stats_matches']))}
                                    Matches
                                </a>
                            </div>
                        </div>
                        <br />
                        ${stats_listing(page['stats'])}
                    </div>
                </div>
            </div>
        </div>
    </div>
</html>